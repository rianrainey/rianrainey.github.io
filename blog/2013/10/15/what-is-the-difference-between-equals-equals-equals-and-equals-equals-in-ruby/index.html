
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>What is the difference between '===', '==', '.equal?' and '.eql?' in Ruby? - Rian Rainey</title>
	<meta name="author" content="Rian Rainey">

	
	<meta name="description" content="Rian Rainey is a freelance web developer in Nashville, TN that specializes in Ruby on Rails development.">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Rian Rainey" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Rian Rainey</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:rianrainey.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/rianrainey" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/rianrainey" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:rianrainey.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">What Is the Difference Between '===', '==', '.equal?' and '.eql?' in Ruby?</h2>
	<div class="entry-content"><p>My years of programming have taking me along the lines of
learning Java in school, to PHP as a CMS hacker and now to Ruby. I was
recently going through an exercise in
<a href="http://www.exercism.io">Exercism.io</a> and while somebody was
&quot;nitpicking&quot; my code, they mentioned that I probably didn&#39;t need the <code>===</code> in my
code. My code was making sure two variables were of the same type and
value. It looked a little like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Bad - my original code</span>
</span><span class='line'><span class="n">variableA</span> <span class="o">===</span> <span class="n">variableB</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Good - my new code</span>
</span><span class='line'><span class="n">variableA</span> <span class="o">==</span> <span class="n">variableB</span>
</span></code></pre></td></tr></table></div></figure>

<p>My nitpicker mentioned that I only needed <code>==</code>. But since I came from
the recent world of PHP, I was confused why I shouldn&#39;t use <code>===</code>. I
discovered it had to do with the fact that everything in Ruby is an
object and different objects can have different definitions for equality
(as with all object orient languages). Ruby&#39;s Object class has <code>===</code>, <code>.equal?</code>,
and <code>.eql?</code>. Many times Ruby classes override <code>==</code> but <code>.equal?</code> <strong>should never be overriden</strong>.</p>

<h3 id="toc_0">What is the &#39;==&#39;?</h3>

<p>This is not implemented at the Ruby Object level. At the Ruby Object level, <code>===</code> returns true only if the two compared
entities are the same object.</p>

<h3 id="toc_1">.eql? - Generic Equality</h3>

<p><strong>The eql? method returns true if obj and other have the same value.</strong> Used by Hash to test members for equality. For objects of class Object, eql? is synonymous with ==. Subclasses normally continue this tradition, but there are exceptions. Numeric types, for example, perform type conversion across ==, but not across eql?, so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span>     <span class="c1">#=&gt; true</span>
</span><span class='line'><span class="mi">1</span><span class="o">.</span><span class="n">eql?</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span>   <span class="c1">#=&gt; false</span>
</span></code></pre></td></tr></table></div></figure>

<p>The Ruby Documentation explains <code>==</code> well:</p>

<blockquote>
<p>At the Object level, <code>==</code> returns true only if obj and other are the same object.
Typically, this method is overridden in descendant classes to provide class-specific
meaning.</p>
</blockquote>

<h3 id="toc_2"><code>.equal?</code> - determines object identitfy</h3>

<p>This is effectively pointer comparison.</p>

<h3 id="toc_3">=== is the Case Equality Operator (Case Subsumption Operator)</h3>

<p>The best answer I found was the Subsumption Operator answers the
question, &quot;If I have a drawer labeled &#39;a&#39; would it make sense to put &#39;b&#39; in that drawer?&quot;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">===</span> <span class="mi">3</span>           <span class="c1"># =&gt; true</span>
</span><span class='line'><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">===</span> <span class="mi">6</span>           <span class="c1"># =&gt; false</span>
</span><span class='line'>
</span><span class='line'><span class="nb">Integer</span> <span class="o">===</span> <span class="mi">42</span>          <span class="c1"># =&gt; true</span>
</span><span class='line'><span class="nb">Integer</span> <span class="o">===</span> <span class="s1">&#39;fourtytwo&#39;</span> <span class="c1"># =&gt; false</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="toc_4">tldr;</h3>

<p><code>==</code> is overriden on a per class basis. Usually you&#39;ll
want to use the class&#39;s implementation of equals so it will be okay to
use this.</p>

<p><code>===</code> answers the question &quot;If I have a drawer labeled &#39;a&#39;, would it
make sense to put &#39;b&#39; in that drawer?&quot;. You don&#39;t use this as often.</p>

<p><code>.equal?</code> should never be overriden by a subclass.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>         <span class="c1"># =&gt; &quot;a&quot;</span>
</span><span class='line'><span class="n">other</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">dup</span>   <span class="c1"># =&gt; &quot;a&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">a</span> <span class="o">==</span> <span class="n">other</span>      <span class="c1"># =&gt; true</span>
</span><span class='line'><span class="n">a</span> <span class="o">===</span> <span class="n">other</span>     <span class="c1"># =&gt; true</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">eql?</span> <span class="n">other</span>    <span class="c1"># =&gt; true</span>
</span><span class='line'><span class="n">a</span><span class="o">.</span><span class="n">equal?</span> <span class="n">other</span>  <span class="c1"># =&gt; false</span>
</span></code></pre></td></tr></table></div></figure>

<h4 id="toc_5">Resources</h4>

<p><a href="http://ruby-doc.org/core-2.0.0/Object.html">Ruby Object Docs</a></p>

<p><a href="http://ruby-doc.org/core-2.0.0/String.html#method-i-3D-3D-3D">Ruby String === Docs</a></p>

<p><a href="http://stackoverflow.com/a/4467823/652200">Stack Overflow 1</a></p>

<p><a href="http://stackoverflow.com/a/7157051/652200">Stack Ovreflow 2</a></p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-15T19:02:00-05:00" pubdate data-updated="true">Oct 15<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/ruby/'>Ruby</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Rian Rainey

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'rianrainey';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rianrainey.github.io/blog/2013/10/15/what-is-the-difference-between-equals-equals-equals-and-equals-equals-in-ruby/';
        var disqus_url = 'http://rianrainey.github.io/blog/2013/10/15/what-is-the-difference-between-equals-equals-equals-and-equals-equals-in-ruby/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-44486546-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>